USE [master]
GO

/* 
    Create a QALogin account
*/
CREATE LOGIN [QALogin] WITH PASSWORD = 0x02004655C1D65FA47CC10F4544048D810E5820A1978DF8750708B3AAE6F039240AD275961BFD9FBCE961ED84B69B4B2A93D62C4C32AF953312EE5B3C189901D92D52438E9E10 HASHED, 
DEFAULT_DATABASE = [master], 
CHECK_POLICY = ON, 
CHECK_EXPIRATION = OFF, 
DEFAULT_LANGUAGE = [us_english]
GO

CREATE DATABASE [ToTestRefresh]
    CONTAINMENT = NONE
    ON  PRIMARY ( NAME = N'ToTestRefresh', FILENAME = N'/var/opt/mssql/data/ToTestRefresh.mdf' , SIZE = 8192KB , FILEGROWTH = 65536KB )
    LOG ON ( NAME = N'ToTestRefresh_log', FILENAME = N'/var/opt/mssql/data/ToTestRefresh_log.ldf' , SIZE = 8192KB , FILEGROWTH = 65536KB )
GO

ALTER DATABASE [ToTestRefresh] SET RECOVERY SIMPLE 
GO

USE [ToTestRefresh]
GO

CREATE USER [QALogin] FOR LOGIN [QALogin] WITH DEFAULT_SCHEMA=[dbo]
GO

CREATE TABLE [dbo].[TestTable] (
    [ID] INT IDENTITY(1,1) PRIMARY KEY,
    [Name] NVARCHAR(100) NOT NULL
)
GO

GRANT SELECT, INSERT, UPDATE, DELETE ON [dbo].[TestTable] TO [QALogin]
GO

ALTER ROLE [db_datawriter] ADD MEMBER [QALogin]
GO
